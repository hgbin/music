(function(e){function t(t){for(var s,a,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},a={app:0},r={app:0},o=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1cb5fec0":"ff7ea1c3","chunk-2d0e6c3a":"acb1b21d","chunk-5e966644":"bcdeefae","chunk-62a85c4a":"eddd0603","chunk-64089a6f":"af387252","chunk-6abc8034":"4a0ab858","chunk-bc3e1a3c":"3451936b","chunk-cad1a9c2":"370f5082"}[e]+".js"}function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1cb5fec0":1,"chunk-5e966644":1,"chunk-62a85c4a":1,"chunk-64089a6f":1,"chunk-6abc8034":1,"chunk-bc3e1a3c":1,"chunk-cad1a9c2":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var s="css/"+({}[e]||e)+"."+{"chunk-1cb5fec0":"5e2ec10d","chunk-2d0e6c3a":"31d6cfe0","chunk-5e966644":"2083f12e","chunk-62a85c4a":"4c9a5215","chunk-64089a6f":"cf360bb5","chunk-6abc8034":"0ce771be","chunk-bc3e1a3c":"05669be9","chunk-cad1a9c2":"ac03b966"}[e]+".css",r=i.p+s,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===s||l===r))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===s||l===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var s=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete a[e],h.parentNode.removeChild(h),n(o)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){a[e]=0})));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,n){s=r[e]=[t,n]}));t.push(s[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(h);var n=r[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",d.name="ChunkLoadError",d.type=s,d.request=a,n[1](d)}r[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var h=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"264c":function(e,t,n){},"264f":function(e,t,n){e.exports=n.p+"img/header.7a67debd.png"},4360:function(e,t,n){"use strict";var s=n("2b0e"),a=n("2f62"),r=(n("d3b7"),{namespaced:!0,state:{singerlist:[],mvlist:[],currentsong:{},currentcomment:[],currentsinger:{},searchsinger:{},songstype:[],getAddid:"",getALLMusicList:[],currentindex:0},mutations:{getsingerlist:function(e,t){e.singerlist=t},getmvlist:function(e,t){e.mvlist=t},getmycurrentsong:function(e,t){e.currentsong=t},getmycurrentcomment:function(e,t){e.currentcomment=t},getmycurrentsinger:function(e,t){e.currentsinger=t},getsearchsinger:function(e,t){e.searchsinger=t},getsongstype:function(e,t){console.log("获取到音乐类型",t),e.songstype=t},getAddid:function(e,t){e.getAddid=t},getALLMusicList:function(e,t){e.getALLMusicList=t},getcurrentindex:function(e,t){var n=0,s=e.getALLMusicList.every((function(e){return e.musicid!==t.musicid&&(n++,!0)}));s||(e.currentindex=n)},updatecurrentindex:function(e,t){-1==t?e.currentindex--:1==t&&e.currentindex++}},getters:{},actions:{},modules:{}}),o=(n("b0c0"),n("5c96")),c=n.n(o),i=n("bc3a"),u=n.n(i),l=n("4328"),d=n.n(l),h={namespaced:!0,state:{Username:"",Userid:"",isReg:!1,isLogin:!1},mutations:{login:function(e,t){console.log(t.name,t.pwd1);var n=t.name,s=t.pwd1;if(""==n||null==n||""==s||null==s)c.a.Message.error("LOGIN ERROR,YOUR INPUT NOT ALLOWED NULL");else{var a=d.a.stringify({username:n,pwd:s});u()({method:"post",url:"/Music/Login",data:a}).then((function(t){console.log(t.data);var s=t.data.isExist;s?(c.a.Message.success("LOGIN SUCCESSFUL!"),sessionStorage.setItem("user",n),e.isLogin=!0,e.Username=n,e.Userid=t.data.userid,m.commit("UserLove/getUserLove",e.Userid)):c.a.Message.error("LOGIN ERROR!")})).catch((function(e){console.log(e.Message)}))}},reg:function(e,t){console.log(t.name,t.pwd1,t.pwd2);var n=t.name,s=t.pwd1,a=t.pwd2;if(""==n||null==n||""==s||null==s||""==a||null==a)c.a.Message.error("REG ERROR,YOUR INPUT NOT ALLOWED NULL");else{var r=d.a.stringify({username:n,pwd:s,pwd1:a});u()({method:"post",url:"/Music/Reg",data:r}).then((function(t){console.log(t.data.isReg);var n=t.data.isReg;n?(c.a.Message.success("Reg SUCCESSFUL!"),e.isReg=!0):c.a.Message.error("Reg ERROR!")})).catch((function(e){console.log(e.Message)}))}},exit:function(e){e.isLogin=!1,e.Username="",e.Userid="",sessionStorage.clear(),c.a.Message.success("EXIT SUCCESSFUL!")}},getters:{},actions:{},modules:{}},f=(n("a434"),{namespaced:!0,state:{UserLove:[]},mutations:{getUserLove:function(e,t){console.log("调用了列表函数",t);var n=d.a.stringify({userid:t});u()({method:"post",url:"/Music/GetUserLoveMusic",data:n}).then((function(t){console.log(t.data.lovelist),e.UserLove=t.data.lovelist})).catch((function(e){console.log(e.message)}))},addUserLove:function(e,t){e.UserLove.push(t)},removeUserLove:function(e,t){var n=0,s=e.UserLove.every((function(e){return e.musicid!==t.musicid&&(n++,!0)}));s||e.UserLove.splice(n,1)}},getters:{},actions:{},modules:{}});s["default"].use(a["a"]);var m=t["a"]=new a["a"].Store({state:{},mutations:{},getters:{},actions:{},modules:{Songs:r,User:h,UserLove:f}})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my_app"},[n("el-backtop",{attrs:{bottom:100,"visibility-height":100,right:30}},[n("i",{staticClass:"el-icon-arrow-up",staticStyle:{"{\n          font-weight":"bolder","font-size":"20px"}})]),n("myheader"),n("router-view")],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("div",{attrs:{id:"logo-img"}},[e._v(" > "),n("router-link",{staticClass:"home",attrs:{to:"/home"}},[n("el-image",{staticStyle:{height:"70px",cursor:"pointer"},attrs:{src:e.url,"fit:fill":""}})],1)],1)]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"header-link"},[n("router-link",{staticClass:"unclick",attrs:{to:"/none",id:"small-span"}},[e._v("发现音乐")]),n("router-link",{attrs:{to:"/mymusic",id:"small-span"}},[e._v("我的音乐")]),n("router-link",{staticClass:"unclick",attrs:{to:"/none",id:"small-span"}},[e._v("关注")]),n("router-link",{staticClass:"unclick",attrs:{to:"/none",id:"small-span"}},[e._v("商城")]),n("router-link",{staticClass:"unclick",attrs:{to:"/none",id:"small-span"}},[e._v("音乐人")]),n("router-link",{staticClass:"unclick",attrs:{to:"/none",id:"small-span"}},[e._v("下载客户端")])],1)]),n("el-col",{attrs:{span:4,id:"search-box"}},[n("el-input",{staticClass:"my-input",attrs:{placeholder:"音乐/歌手",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.search_show?n("div",{attrs:{id:"search-list"}},[n("span",{staticClass:"show-list super-small-span",attrs:{id:"small-span"}},[e._v("歌曲")]),e._l(e.searchsongs,(function(t){return[n("div",{key:t.musicid,attrs:{id:"search-div"}},[n("router-link",{attrs:{to:{path:"/listen",query:{item:t}}}},[n("div",{staticClass:"super-small-span",attrs:{id:"small-span"},on:{click:e.miss}},[e._v(e._s(t.musicname))])])],1)]})),n("span",{staticClass:"show-list super-small-span",attrs:{id:"small-span"}},[e._v("歌手")]),e._l(e.searchsingers,(function(t,s){return[n("div",{key:s,attrs:{id:"search-div"}},[n("div",{staticClass:"super-small-span",attrs:{id:"small-span"},on:{click:function(n){e.miss(),e.findsinger(t.musicsinger)}}},[e._v(e._s(t.musicsinger))])])]}))],2):e._e()],1),n("el-col",{attrs:{span:2}},[n("div",{attrs:{id:"upload-box"}},[n("router-link",{attrs:{to:"/upload",id:"small-span"}},[e._v("上传")])],1)])],1),n("el-row",{attrs:{":gutter":20,id:"my-header2"}},[n("el-col",{attrs:{span:12,id:"my-header2-box"}},[n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("推荐")]),n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("排行榜")]),n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("歌单")]),n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("主播电台")]),n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("歌手")]),n("router-link",{staticClass:"super-small-span unclick",attrs:{to:"/none",id:"small-span"}},[e._v("新碟上架")])],1)],1)],1)},c=[],i=n("5530"),u=(n("ac1f"),n("841c"),n("ba76")),l=n("2f62"),d={data:function(){return{url:n("264f"),search:"",search_show:!1,searchsongs:[],searchsingers:[]}},created:function(){var e=this;window.addEventListener("scroll",(function(){e.miss()}))},methods:{show:function(){""==this.search?this.search_show=!1:(this.search_show=!0,this.getsearch())},miss:function(){this.search="",this.search_show=!1},getsearch:function(){var e=this;this.$axios({method:"get",url:"/Music/SearchAll",params:{search:this.search}}).then((function(t){console.log(t.data.searchsongs,t.data.searchsingers),e.searchsongs=t.data.searchsongs,e.searchsingers=t.data.searchsingers})).catch((function(e){console.log(e)}))},findsinger:function(e){u["b"](e)}},computed:Object(i["a"])({},Object(l["c"])("Songs",["searchsinger"])),watch:{search:function(e){console.log("new搜索",e),this.show()},searchsinger:function(e){console.log("搜索的歌手",e);var t=e;this.$router.push({path:"/singer",query:{singer:t}})}}},h=d,f=(n("d60e"),n("2877")),m=Object(f["a"])(h,o,c,!1,null,null,null),g=m.exports,p={components:{Myheader:g},data:function(){return{}},methods:{}},v=p,b=Object(f["a"])(v,a,r,!1,null,null,null),k=b.exports,y=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),w=n("4360"),L=n("5c96"),_=n.n(L);s["default"].use(y["a"]);var C=y["a"].prototype.push;y["a"].prototype.push=function(e){return C.call(this,e).catch((function(){}))};var U=y["a"].prototype.replace;y["a"].prototype.push=function(e){return U.call(this,e).catch((function(){}))};var S=[{path:"/",component:function(){return n.e("chunk-5e966644").then(n.bind(null,"cd56"))},children:[{path:"myshowlist",component:function(){return n.e("chunk-62a85c4a").then(n.bind(null,"799e"))},children:[{path:"songslist/:type?",component:function(){return n.e("chunk-6abc8034").then(n.bind(null,"9aae"))}}]}]},{path:"/home",redirect:"/"},{path:"/listen",component:function(){return n.e("chunk-cad1a9c2").then(n.bind(null,"fc91"))}},{path:"/singer",component:function(){return n.e("chunk-bc3e1a3c").then(n.bind(null,"7f43"))}},{path:"/upload",component:function(){return n.e("chunk-1cb5fec0").then(n.bind(null,"2679"))},meta:{isChk:!0}},{path:"/mymusic",component:function(){return n.e("chunk-64089a6f").then(n.bind(null,"b5d3"))},meta:{isChk:!0}},{path:"/none",component:function(){return n.e("chunk-2d0e6c3a").then(n.bind(null,"99ae"))}}],O=new y["a"]({routes:S});O.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.isChk}))?""!=w["a"].state.User.Userid&&null!=w["a"].state.User.Userid?n():(_.a.Message.error("请先登录"),n(!1)):n()}));var x=O;n("0fae");s["default"].use(_.a);var E=n("4328"),M=n.n(E),R=n("bc3a"),A=n.n(R);s["default"].prototype.$axios=A.a,s["default"].prototype.$qs=M.a,s["default"].config.productionTip=!1,new s["default"]({router:x,store:w["a"],render:function(e){return e(k)}}).$mount("#app")},ba76:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return m}));var s=n("bc3a"),a=n.n(s),r=n("4360"),o="http://localhost:3000",c=function(){return"http://localhost:8099/Music/assets/image/"},i=function(){a()({method:"get",url:o+"/top/artists?offset=0&limit=10"}).then((function(e){console.log("singer",e.data.artists),r["a"].commit("Songs/getsingerlist",e.data.artists)})).catch((function(e){console.log(e.message)}))},u=function(){a()({method:"get",url:o+"/top/mv?limit=10"}).then((function(e){console.log("mv",e.data.data),r["a"].commit("Songs/getmvlist",e.data.data)})).catch((function(e){console.log(e.message)}))},l=function(e){a()({method:"get",url:o+"/comment/music?id="+e+"&limit=10"}).then((function(e){console.log("comments",e.data.hotComments),r["a"].commit("Songs/getmycurrentcomment",e.data.hotComments)})).catch((function(e){console.log(e.message)}))},d=function(e){a()({method:"get",url:o+"/search?keywords="+e+"&type=100"}).then((function(e){console.log(e.data.result.artists[0]),r["a"].commit("Songs/getsearchsinger",e.data.result.artists[0])})).catch((function(e){console.log(e.message)}))},h=function(e){a()({method:"get",url:o+"/search?keywords="+e+"&type=100"}).then((function(e){console.log(e.data.result),console.log("mvSinger",e.data.result.artists[0].id);var t=e.data.result.artists[0].id;f(t)})).catch((function(e){console.log(e.message)}))},f=function(e){a()({method:"get",url:o+"/artist/desc?id="+e}).then((function(e){console.log("mvSinger",e.data),r["a"].commit("Songs/getmycurrentsinger",e.data)})).catch((function(e){console.log(e.message)}))},m=function(e,t){a()({method:"get",url:o+"/search?keywords="+e+","+t}).then((function(e){console.log("mvSinger",e.data.result.songs[0]),r["a"].commit("Songs/getAddid",e.data.result.songs[0].id)})).catch((function(e){console.log(e.message)}))}},d60e:function(e,t,n){"use strict";n("264c")}});
//# sourceMappingURL=app.dcfe572f.js.map