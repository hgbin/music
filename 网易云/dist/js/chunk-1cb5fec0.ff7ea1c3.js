(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cb5fec0"],{2647:function(t,e,i){},2679:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",[i("el-main",{staticClass:"my-upload-main"},[i("div",{attrs:{id:"my-upload-title"}},[t._v("网抑云上传")]),i("el-form",{ref:"form",staticClass:"my-upload-form",attrs:{model:t.form,"label-width":"80px"}},[i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-ID"}},[i("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",disabled:!0},model:{value:t.form.musicid,callback:function(e){t.$set(t.form,"musicid",e)},expression:"form.musicid"}})],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-NAME"}},[i("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",placeholder:"例如: 水星记"},model:{value:t.form.musicname,callback:function(e){t.$set(t.form,"musicname",e)},expression:"form.musicname"}})],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-SINGER"}},[i("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",placeholder:"例如：郭顶"},model:{value:t.form.musicsinger,callback:function(e){t.$set(t.form,"musicsinger",e)},expression:"form.musicsinger"}})],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-DATETIME"}},[i("el-date-picker",{staticClass:"my-form-date",attrs:{type:"datetime",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions},model:{value:t.form.musicDatetime,callback:function(e){t.$set(t.form,"musicDatetime",e)},expression:"form.musicDatetime"}})],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-MUSICTYPE"}},[i("el-select",{staticClass:"my-form-select",attrs:{placeholder:"请选择音乐类型"},model:{value:t.form.musicType,callback:function(e){t.$set(t.form,"musicType",e)},expression:"form.musicType"}},t._l(t.musictype,(function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"MUSIC-BACKGROUND"}},[i("el-input",{staticClass:"my-upload-input",attrs:{disabled:!0,clearable:""},model:{value:t.form.musicbackurl,callback:function(e){t.$set(t.form,"musicbackurl",e)},expression:"form.musicbackurl"}}),i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/Music/Upload","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-change":t.change,"on-success":t.uploadsuccess,"on-error":t.uploaderror,"auto-upload":!1,enctype:"multipart/form-data",limit:1}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),i("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-OUTLINK"}},[i("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",disabled:!0},model:{value:t.form.musicoutlink,callback:function(e){t.$set(t.form,"musicoutlink",e)},expression:"form.musicoutlink"}})],1),i("el-button",{staticStyle:{},attrs:{icon:"el-icon-success",circle:""},on:{click:t.sureupload}})],1)],1)],1)],1)},a=[],o=i("5530"),l=(i("b0c0"),i("e9c4"),i("ba76")),c=i("2f62"),n={data:function(){return{form:{musicid:"",musicname:"",musicsinger:"",musicDatetime:"",musicType:"",musicurl:"",musicbackurl:"",musicoutlink:""},musictype:[],dialogVisible:!1,dialogImageUrl:"",pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created:function(){this.init()},methods:{init:function(){this.musictype=this.songstype,console.log(this.musictype)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},change:function(t){this.form.musicbackurl=t.name,console.log(t)},uploadsuccess:function(t,e,i){this.form.musicbackurl=e.name,console.log("上传成功",t,e,e.name,i),this.uploadAll()},uploaderror:function(t){console.log(t),this.$message.error("上传失败")},uploadAll:function(){var t=this,e=this.$qs.stringify({music:JSON.stringify(this.form)});this.$axios({method:"post",url:"/Music/AddMusic",data:e}).then((function(e){console.log(e.data.tip),!0===e.data.tip?setTimeout((function(){t.$message.success("上传成功")}),1e3):e.data.tip.indexOf("上传失败")>=0?setTimeout((function(){t.$message.warning("上传失败,该歌曲id已存在")}),1e3):setTimeout((function(){t.$message.warning("上传失败")}),1e3)})).catch((function(t){console.log(t)}))},sureupload:function(){var t=this;this.$confirm("确定上传信息无误嘛, 是否继续?","上传提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(e){"confirm"===e&&t.$refs.upload.submit()})).catch((function(){t.$message({type:"info",message:"已取消上传"})}))},change1:function(t){this.form.musicDatetime=t.musicDatetime}},computed:Object(o["a"])({},Object(c["c"])("Songs",["songstype","getAddid"])),watch:{songstype:function(t){this.musictype=t,console.log("???????上传",this.musictype)},"form.musicsinger":function(t){console.log(t),this.$store.commit("Songs/getAddid",""),null!=t&&this.form.musicname&&l["a"](this.form.musicname,t)},getAddid:function(t){console.log("getid!!!!!"),this.form.musicid=t,this.form.musicoutlink="https://music.163.com/outchain/player?type=2&id="+t+"&auto=1&height=66"},form:{handler:"change1",deep:!0}}},u=n,r=(i("5c3d"),i("2877")),m=Object(r["a"])(u,s,a,!1,null,null,null);e["default"]=m.exports},"5c3d":function(t,e,i){"use strict";i("2647")},e9c4:function(t,e,i){var s=i("23e7"),a=i("da84"),o=i("d066"),l=i("2ba4"),c=i("e330"),n=i("d039"),u=a.Array,r=o("JSON","stringify"),m=c(/./.exec),d=c("".charAt),f=c("".charCodeAt),p=c("".replace),g=c(1..toString),h=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,k=function(t,e,i){var s=d(i,e-1),a=d(i,e+1);return m(b,t)&&!m(y,a)||m(y,t)&&!m(b,s)?"\\u"+g(f(t,0),16):t},C=n((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&s({target:"JSON",stat:!0,forced:C},{stringify:function(t,e,i){for(var s=0,a=arguments.length,o=u(a);s<a;s++)o[s]=arguments[s];var c=l(r,null,o);return"string"==typeof c?p(c,h,k):c}})}}]);
//# sourceMappingURL=chunk-1cb5fec0.ff7ea1c3.js.map