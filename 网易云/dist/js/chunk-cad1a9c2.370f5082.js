(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cad1a9c2"],{"019e":function(t,e,s){},ac1b:function(t,e,s){"use strict";s("019e")},e9c4:function(t,e,s){var i=s("23e7"),n=s("da84"),a=s("d066"),r=s("2ba4"),o=s("e330"),c=s("d039"),l=n.Array,u=a("JSON","stringify"),m=o(/./.exec),d=o("".charAt),g=o("".charCodeAt),p=o("".replace),h=o(1..toString),f=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,v=/^[\uDC00-\uDFFF]$/,y=function(t,e,s){var i=d(s,e-1),n=d(s,e+1);return m(b,t)&&!m(v,n)||m(v,t)&&!m(b,i)?"\\u"+h(g(t,0),16):t},k=c((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&i({target:"JSON",stat:!0,forced:k},{stringify:function(t,e,s){for(var i=0,n=arguments.length,a=l(n);i<n;i++)a[i]=arguments[i];var o=r(u,null,a);return"string"==typeof o?p(o,f,y):o}})},fc91:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-container",[s("el-main",{staticStyle:{padding:"0 !important"}},[s("div",{attrs:{id:"music-box"}},[s("div",{attrs:{id:"music-back-box"}},[s("el-image",{attrs:{src:t.currentsong.musicbackurl,id:"rotate-img"}})],1),s("div",{attrs:{id:"music-control-box"}},[s("span",{staticClass:"music-show-span",attrs:{id:"small-span"}},[t._v("NAME: "+t._s(t.currentsong.musicname))]),s("span",{staticClass:"music-show-span",attrs:{id:"small-span"}},[t._v("SINGER: "+t._s(t.currentsong.musicsinger))]),s("span",{staticClass:"music-show-span",attrs:{id:"small-span"}},[t._v("TIME: "+t._s(t.currentsong.musicDatetime))]),s("span",{staticClass:"music-show-span",attrs:{id:"small-span"}},[t._v("TYPE: "+t._s(t.currentsong.musicType))]),s("span",{staticClass:"music-show-span",attrs:{id:"small-span"}},[t._v("JOIN LOVE")]),s("div",{staticClass:"listen-box"},[s("el-button",{attrs:{id:"my-love-bt",icon:"el-icon-d-arrow-left",circle:""},on:{click:function(e){return t.changePlayingsong(-1)}}}),s("el-button",{attrs:{id:"my-love-bt",icon:"el-icon-star-off",circle:""},on:{click:t.AddJoin}}),s("el-button",{attrs:{id:"my-love-bt",icon:"el-icon-d-arrow-right",circle:""},on:{click:function(e){return t.changePlayingsong(1)}}}),s("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[s("div",{staticClass:"show-ALLMusic-box"},[t._l(t.getALLMusicList,(function(e,i){return[s("div",{key:i,staticClass:"show-ALLMusic-small-box"},[s("router-link",{attrs:{to:{path:"/listen",query:{item:e}}}},[s("el-image",{staticClass:"show-ALL-image",attrs:{src:e.musicbackurl,fit:"cover"}})],1),s("span",{attrs:{id:"small-span"}},[t._v(t._s(e.musicname))]),t._v("--- "),s("span",{attrs:{id:"small-span"}},[t._v(t._s(e.musicsinger))])],1)]}))],2),s("el-button",{attrs:{slot:"reference",icon:"el-icon-s-data",id:"my-love-bt",circle:""},slot:"reference"})],1)],1)]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"music-iframe-box"}},[s("iframe",{attrs:{id:"iframe",frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",width:"100%",height:"150",src:t.currentsong.musicoutlink}})])])])],1),s("el-button",{attrs:{id:"my-comment-bt",icon:"el-icon-edit",round:""},on:{click:function(e){t.drawer=!0}}},[t._v(" 评论 ")]),s("el-drawer",{attrs:{title:"热门评论",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[t._l(t.mycomment,(function(e,i){return[s("div",{key:i,attrs:{id:"comment-box"}},[s("el-image",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.user.avatarUrl}}),s("div",[s("span",{staticClass:"comment-span love-span",attrs:{id:"small-span"}},[t._v("loveCount:"+t._s(e.likedCount)+" Times")])]),s("div",[s("span",{staticClass:"comment-span name-span",attrs:{id:"small-span"}},[t._v(t._s(e.user.nickname)+":")]),s("span",{staticClass:"comment-span",attrs:{id:"small-span"}},[t._v(t._s(e.content))])])],1)]}))],2),s("el-button",{attrs:{id:"my-update-bt",icon:"el-icon-edit",round:""},on:{click:t.edit}},[t._v(" 编辑 ")]),s("el-drawer",{staticClass:"my-update-drawer",attrs:{title:"编辑修改",visible:t.drawer1,direction:"ttb"},on:{"update:visible":function(e){t.drawer1=e}}},[s("div",{staticClass:"my-upload-main"},[s("el-form",{ref:"form",staticClass:"my-upload-form",attrs:{model:t.currentsong,"label-width":"80px"}},[s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-ID"}},[s("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",disabled:!0},model:{value:t.currentsong.musicid,callback:function(e){t.$set(t.currentsong,"musicid",e)},expression:"currentsong.musicid"}})],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-NAME"}},[s("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",placeholder:"例如: 水星记"},model:{value:t.currentsong.musicname,callback:function(e){t.$set(t.currentsong,"musicname",e)},expression:"currentsong.musicname"}})],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-SINGER"}},[s("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",placeholder:"例如：郭顶"},model:{value:t.currentsong.musicsinger,callback:function(e){t.$set(t.currentsong,"musicsinger",e)},expression:"currentsong.musicsinger"}})],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-DATETIME"}},[s("el-date-picker",{staticClass:"my-form-date",attrs:{type:"datetime",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions},model:{value:t.currentsong.musicDatetime,callback:function(e){t.$set(t.currentsong,"musicDatetime",e)},expression:"currentsong.musicDatetime"}})],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-MUSICTYPE"}},[s("el-select",{staticClass:"my-form-select",attrs:{placeholder:"请选择音乐类型"},model:{value:t.currentsong.musicType,callback:function(e){t.$set(t.currentsong,"musicType",e)},expression:"currentsong.musicType"}},t._l(t.musictype,(function(t,e){return s("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"MUSIC-BACKGROUND"}},[s("el-input",{staticClass:"my-upload-input",attrs:{disabled:!0,clearable:""},model:{value:t.currentsong.musicbackurl,callback:function(e){t.$set(t.currentsong,"musicbackurl",e)},expression:"currentsong.musicbackurl"}}),s("el-upload",{ref:"update",staticClass:"upload-demo",attrs:{action:"/Music/Upload","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-change":t.change,"on-success":t.uploadsuccess,"on-error":t.uploaderror,"auto-upload":!1,enctype:"multipart/form-data",limit:1}},[s("i",{staticClass:"el-icon-plus"})]),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),s("el-form-item",{staticClass:"title-span my-upload-form-item",attrs:{label:"SONG-OUTLINK"}},[s("el-input",{staticClass:"my-upload-input",attrs:{clearable:"",disabled:!0},model:{value:t.currentsong.musicoutlink,callback:function(e){t.$set(t.currentsong,"musicoutlink",e)},expression:"currentsong.musicoutlink"}})],1),s("el-button",{staticStyle:{},attrs:{icon:"el-icon-success",circle:""},on:{click:t.sureupdate}})],1)],1)])],1)},n=[],a=s("5530"),r=(s("b0c0"),s("e9c4"),s("ba76")),o=s("2f62"),c={data:function(){return{playmusic:{},mycomment:[],musictype:[],drawer:!1,drawer1:!1,dialogVisible:!1,dialogImageUrl:"",liked:!1,loading:!1,pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]}}},created:function(){this.initgetmusic(),this.initcommpent(),this.IsJoin(),this.getcurrentindex(this.currentsong),this.initloading()},methods:Object(a["a"])(Object(a["a"])({initgetmusic:function(){this.musictype=this.songstype;var t=this.$route.query.item;console.log(t.length),15==t.length&&this.$router.push("/home"),"undefined"!=t&&null!=t&&""!=t&&(this.playmusic=Object.assign({},t),console.log(this.playmusic),this.getmycurrentsong(this.playmusic))},initcommpent:function(){r["d"](this.playmusic.musicid)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},change:function(t){console.log(t)},uploadsuccess:function(t,e,s){this.currentsong.musicbackurl=r["g"]()+e.name,console.log("上传成功",t,e,e.name,s)},uploaderror:function(t){console.log(t),this.$message.error("上传失败")},updateAll:function(){var t=this;console.log("?????");var e=this.$qs.stringify({music:JSON.stringify(this.currentsong)});this.$axios({method:"post",url:"/Music/UpdateMusic",data:e}).then((function(e){console.log(e.data.tip),!0===e.data.tip?setTimeout((function(){t.$message.success("编辑成功")}),1e3):setTimeout((function(){t.$message.warning("上传失败")}),1e3)})).catch((function(t){console.log(t)}))},edit:function(){var t=this;if(null===this.Userid||""===this.Userid||null==sessionStorage.user)return this.$message.error("请先登录"),void setTimeout((function(){t.$router.push("/home")}),1e3);this.drawer1=!0},sureupdate:function(){var t=this;this.$confirm("确定上传信息无误嘛, 是否继续?","上传提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(e){"confirm"===e&&(t.drawer1=!1,t.$refs.update.submit(),setTimeout((function(){t.updateAll()}),1e3))})).catch((function(){t.$message({type:"info",message:"已取消编辑"})}))},IsJoin:function(){var t=this;if(null!==this.Userid&&""!==this.Userid&&null!=sessionStorage.user){var e=this.$qs.stringify({musicid:this.currentsong.musicid,userid:this.Userid});this.$axios({method:"post",url:"/Music/CheckLoveMusic",data:e}).then((function(e){console.log("是否存在该歌曲",e.data.tip),e.data.tip?t.liked=!0:t.liked=!1})).catch((function(t){console.log(t)}))}else this.liked=!1},AddJoin:function(){var t=this;if(null===this.Userid||""===this.Userid||null==sessionStorage.user)return this.$message.error("请先登录"),void setTimeout((function(){t.$router.push("/home")}),1e3);var e=this.$qs.stringify({musicid:this.currentsong.musicid,userid:this.Userid});this.liked?(this.liked=!1,this.$axios({method:"post",url:"/Music/QuitLoveMusic",data:e}).then((function(e){console.log(e.data.tip),e.data.tip?(t.$message.success("取消收藏咯"),t.removeUserLove(t.currentsong)):t.$message.error("取消失败咯")})).catch((function(t){console.log(t)}))):(this.liked=!0,this.$axios({method:"post",url:"/Music/AddLoveMusic",data:e}).then((function(e){console.log(e.data.tip),e.data.tip?(t.$message.success("收藏成功咯"),t.addUserLove(t.currentsong)):t.$message.error("收藏失败咯")})).catch((function(t){console.log(t)})))},change1:function(t){this.currentsong.musicDatetime=t.musicDatetime},initColor:function(t){for(var e=0;e<this.getALLMusicList.length;e++)document.getElementsByClassName("show-ALLMusic-small-box")[e].style.cssText=" background-color:white;";document.getElementsByClassName("show-ALLMusic-small-box")[t].style.cssText=" background-color: rgba(240, 172, 178, 0.64) !important;"},changePlayingsong:function(t){var e=-1,s=this.getALLMusicList.length;-1==t?0===this.currentindex?e=s-1:(this.$store.commit("Songs/updatecurrentindex",-1),e=this.currentindex):1==t&&(this.currentindex===s-1?e=0:(this.$store.commit("Songs/updatecurrentindex",1),e=this.currentindex));var i=this.getALLMusicList[e];console.log("改变时新的Lisetn",i),this.$router.push({path:"/Listen",query:{item:i}})},initloading:function(){var t=this;this.loading=!0,setTimeout((function(){t.loading=!1}),500)}},Object(o["b"])("Songs",["getmycurrentsong","getcurrentindex"])),Object(o["b"])("UserLove",["addUserLove","removeUserLove"])),computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["c"])("Songs",["currentsong","currentcomment","getALLMusicList","currentindex","songstype"])),Object(o["c"])("User",["Userid"])),Object(o["c"])("UserLove",["UserLove"])),watch:{$route:function(){this.initgetmusic(),this.initcommpent(),this.IsJoin(),this.getcurrentindex(this.currentsong),this.initloading()},currentcomment:function(t){this.mycomment=t},songstype:function(t){this.musictype=t,console.log("??????????",this.musictype)},"currentsong.musicbackurl":function(t){this.currentsong.musicbackurl=t},UserLove:function(t){console.log("我的收藏列表在变化",t)},currentsong:{handler:"change1",deep:!0},currentindex:function(t){this.initColor(t)}}},l=c,u=(s("ac1b"),s("2877")),m=Object(u["a"])(l,i,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-cad1a9c2.370f5082.js.map